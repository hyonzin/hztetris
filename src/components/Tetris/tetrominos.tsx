export const tetrominos = ['I', 'O', 'Z', 'S', 'J', 'L', 'T']

export const tetrominosPositions = {
  'I': [
    [[-2,-1],[-1,-1],[0,-1],[1,-1]],
    [[0,-2],[0,-1],[0,0],[0,1]],
    [[-2,0],[-1,0],[0,0],[1,0]],
    [[-1,-2],[-1,-1],[-1,0],[-1,1]],
  ],
  'O': [
    [[-1,-1],[0,-1],[-1,0],[0,0]],
    [[-1,-1],[0,-1],[-1,0],[0,0]],
    [[-1,-1],[0,-1],[-1,0],[0,0]],
    [[-1,-1],[0,-1],[-1,0],[0,0]],
  ],
  'Z': [
    [[-1,-1],[0,-1],[0,0],[1,0]],
    [[1,-1],[1,0],[0,0],[0,1]],
    [[-1,0],[0,0],[0,1],[1,1]],
    [[0,-1],[0,0],[-1,0],[-1,1]],
  ],
  'S': [
    [[1,-1],[0,-1],[0,0],[-1,0]],
    [[0,-1],[0,0],[1,0],[1,1]],
    [[-1,1],[0,1],[0,0],[1,0]],
    [[-1,-1],[-1,0],[0,0],[0,1]],
  ],
  'J': [
    [[-1,-1],[-1,0],[0,0],[1,0]],
    [[1,-1],[0,-1],[0,0],[0,1]],
    [[-1,0],[0,0],[1,0],[1,1]],
    [[0,-1],[0,0],[0,1],[-1,1]],
  ],
  'L': [
    [[-1,0],[0,0],[1,0],[1,-1]],
    [[0,-1],[0,0],[0,1],[1,1]],
    [[-1,1],[-1,0],[0,0],[1,0]],
    [[-1,-1],[0,-1],[0,0],[0,1]],
  ],
  'T': [
    [[0,-1],[-1,0],[0,0],[1,0]],
    [[0,-1],[0,0],[0,1],[1,0]],
    [[-1,0],[0,0],[1,0],[0,1]],
    [[-1,0],[0,-1],[0,0],[0,1]],
  ],
  '': [
    [[0,0],[0,0],[0,0],[0,0]],
    [[0,0],[0,0],[0,0],[0,0]],
    [[0,0],[0,0],[0,0],[0,0]],
    [[0,0],[0,0],[0,0],[0,0]],
  ],
}

// ['I', 'O', 'Z', 'S', 'J', 'L', 'T']
export const tetrominosColors = {
  '': 'bg-gray-800',
  '_black': 'bg-transparent',
  'I': 'bg-emerald-300',
  'O': 'bg-orange-300',
  'Z': 'bg-red-300',
  'S': 'bg-purple-300',
  'J': 'bg-fuchsia-300',
  'L': 'bg-yellow-300',
  'T': 'bg-indigo-300',
}

export const tetrominosRotationTests = {
  'default': {
    'R': [
      /*0->R*/ [[ 0, 0],	[-1, 0],	[-1,-1],	[ 0,+2],	[-1,+2]],
      /*R->2*/ [[ 0, 0],	[+1, 0],	[+1,+1],	[ 0,-2],	[+1,-2]],
      /*2->L*/ [[ 0, 0],	[+1, 0],	[+1,-1],	[ 0,+2],	[+1,+2]],
      /*L->0*/ [[ 0, 0],	[-1, 0],	[-1,+1],	[ 0,-2],	[-1,-2]],
    ],
    'L': [
      /*0->L*/ [[ 0, 0],	[+1, 0],	[+1,-1],	[ 0,+2],	[+1,+2]],
      /*R->0*/ [[ 0, 0],	[+1, 0],	[+1,+1],	[ 0,-2],	[+1,-2]],
      /*2->R*/ [[ 0, 0],	[-1, 0],	[-1,-1],	[ 0,+2],	[-1,+2]],
      /*L->2*/ [[ 0, 0],	[-1, 0],	[-1,+1],	[ 0,-2],	[-1,-2]],
    ],
  },
  'I': {
    'R': [
      /*0->R*/ [[ 0, 0],	[-2, 0],	[+1, 0],	[-2,+1],	[+1,-2]],
      /*R->2*/ [[ 0, 0],	[-1, 0],	[+2, 0],	[-1,-2],	[+2,+1]],
      /*2->L*/ [[ 0, 0],	[+2, 0],	[-1, 0],	[+2,-1],	[-1,+2]],
      /*L->0*/ [[ 0, 0],	[+1, 0],	[-2, 0],	[+1,+2],	[-2,-1]],
    ],
    'L': [
      /*0->L*/ [[ 0, 0],	[-1, 0],	[+2, 0],	[-1,-2],	[+2,+1]],
      /*R->0*/ [[ 0, 0],	[+2, 0],	[-1, 0],	[+2,-1],	[-1,+2]],
      /*2->R*/ [[ 0, 0],	[+1, 0],	[-2, 0],	[+1,+2],	[-2,-1]],
      /*L->2*/ [[ 0, 0],	[-2, 0],	[+1, 0],	[-2,+1],	[+1,-2]],
    ],
  },
  'O': {
    'R': [
      /*0->R*/ [[ 0, 0]],
      /*R->2*/ [[ 0, 0]],
      /*2->L*/ [[ 0, 0]],
      /*L->0*/ [[ 0, 0]],
    ],
    'L': [
      /*0->L*/ [[ 0, 0]],
      /*R->0*/ [[ 0, 0]],
      /*2->R*/ [[ 0, 0]],
      /*L->2*/ [[ 0, 0]],
    ],
  },
}

function _shuffle(source_array) {
  let array = source_array.slice()
  for (let i = array.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1))
    let tmp = array[i]
    array[i] = array[j]
    array[j] = tmp
  }
  return array
}

export function getNewQueue() {
  return _shuffle(tetrominos)
}
